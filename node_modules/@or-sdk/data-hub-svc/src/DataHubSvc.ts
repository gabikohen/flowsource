import { Base, CalApiParams } from '@or-sdk/base';
import { DataHubSvcConfig } from './types';
import { SERVICE_KEY } from './constants';

export class DataHubSvc extends Base {

  constructor(params: DataHubSvcConfig) {
    const { token, discoveryUrl, accountId, dataHubSvcUrl } = params;

    super({
      token,
      discoveryUrl,
      serviceKey: SERVICE_KEY,
      accountId,
      serviceUrl: dataHubSvcUrl,
    });
  }

  /**
   * Make request
   * ```typescript
   * const result = await dataHubSvc.makeRequest({
   *   route: '/route',
   *   method: 'GET',
   *   data: requestData,
   *   params: queryParams,
   * });
   * ```
   */
  public async makeRequest<T>(params: CalApiParams): Promise<T> {
    return this.callApiV2<T>(params);
  }
}
